<!doctype html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<meta content="width=device-width,initial-scale=1" name="viewport">
	<title>European Great Dane Champions 1900-1980</title>
	<meta content="description" name="description">
	<!--  <link href="static/favicon.ico" rel="shortcut icon" type="image/x-icon">
    https://atuin.ru/blog/fancybox-3-s-temoj-oformleniya/
  -->
	<link href="./css/eu-gallery.css" rel="stylesheet">
	<!-- Добавлены официальные стили Fancybox CDN -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css" />
	<style>
		p {
			font-family: 'OpenSans', sans-serif;
			font-size: 16px;
			margin: 0;
			text-align: center;
			color: white;
		}
		@media (max-width: 767px) {
			.sw__left {
				padding-top:100%;
			}
		}
		@media (min-width: 768px) {
			.sw__left {
				padding-top:50%;
			}
		}
	</style>
</head>
<body> <p>Click/tap to enlarge - нажмите для увеличения</br></br></p>
<div class="swipe" id="app">
	<div class="sw__left">
		<!-- Карусель. Слайды будут сгенерированы сюда скриптом. -->
		<div class="f-carousel" id="Carousel-1">
			<!-- Здесь будут вставлены слайды -->
		</div>
	</div>
</div>  <!--swipe  -->

<!-- Добавлена ссылка на Fancybox CDN. Она инициализирует Fancybox автоматически. -->
<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>

<script>
	// Функция для динамического создания галереи из JSON
	function createGalleryFromJSON(jsonList) {
		const carouselContainer = document.getElementById('Carousel-1');
		if (!carouselContainer) {
			console.error('Не найден элемент с id "Carousel-1"');
			return;
		}

		carouselContainer.innerHTML = '';

		jsonList.forEach(imageFileName => {
			// Используем относительный путь для изображений
			const fullImagePath = `./collection/${imageFileName}`;

			const slideDiv = document.createElement('div');
			slideDiv.className = 'f-carousel__slide';
			slideDiv.setAttribute('data-fancybox', 'gallery');
			slideDiv.setAttribute('data-src', fullImagePath);

			const imgContainer = document.createElement('div');
			imgContainer.className = 'sw__img';

			const imgElement = document.createElement('img');
			imgElement.src = fullImagePath;
			imgElement.alt = imageFileName || '';
			imgElement.className = 'w-full h-full object-contain';

			imgContainer.appendChild(imgElement);
			slideDiv.appendChild(imgContainer);
			carouselContainer.appendChild(slideDiv);
		});
	}

	// Загружаем данные для галереи из JSON-файла
	document.addEventListener('DOMContentLoaded', async () => {
		try {
			// Используем относительный путь для файла JSON
			const response = await fetch('./collection/images.json');
			if (!response.ok) {
				throw new Error(`Ошибка сети: ${response.status} ${response.statusText}`);
			}
			const galleryData = await response.json();
			createGalleryFromJSON(galleryData);

			// Удален вызов `new Fancybox.Carousel()`, так как Fancybox инициализирует
			// элементы с классом `.f-carousel` автоматически.
		} catch (error) {
			console.error('Ошибка при загрузке JSON:', error);
			const carouselContainer = document.getElementById('Carousel-1');
			if (carouselContainer) {
				carouselContainer.innerHTML = '<p class="text-center text-red-500">Не удалось загрузить данные галереи. Пожалуйста, убедитесь, что файл `images.json` находится в папке `collection` и вы открываете `gallery.html` через локальный сервер.</p>';
			}
		}
	});
</script>

</body>
</html>